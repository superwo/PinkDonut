function showChart(){$percent.each(function(t){function e(){$({countNum:o.text()}).animate({countNum:a},{duration:3e3,easing:"swing",step:function(){o.text(Math.floor(this.countNum)+"%"),n.parent(".pie").attr("style","animation-delay: -"+this.countNum+"s")},complete:function(){o.text(this.countNum+"%"),n.parent(".pie").attr("style","animation-delay: -"+this.countNum+"s")}}),i.destroy()}var n=$(this),a=parseFloat($(this).attr("data-percent")),o=$($percentText[t]);a<0?a=0:a>100&&(a=100);var i=new Waypoint({element:n[0],handler:e.bind(this),offset:"65%"})})}function revealItems(t,e){!function(){t.addClass("reveal-item")}(),function(){t.each(function(){var t=this;new Waypoint({element:t,handler:function(){$(t).addClass("reveal-item--is-visible")},offset:e})})}()}var $percent=$(".pie__percent"),$percentText=$(".features__title span");$(document).ready(function(){function t(){$.getJSON("/portfolio.json",function(t){var e=$(".portfolio__list");$.each(t,function(t,n){var a=$("<li></li>");a.addClass("portfolio__item");var o='<a class="portfolio__view" style="background-image: url('+n.url+');" href="'+n.url+'"><span></span></a>';a.html(o),e.append(a)})}).done(function(){$("#loadPortfolio").parent(".btn-wrap").hide()}).fail(function(){console.error("error from getJSON!")}).always(function(){$(".loader").hide()})}function e(){$(window).width()<770?a.duration(90):a.duration(230)}$(".nav__link").smoothScroll(),$("#mainheaderScroll, .section-link").smoothScroll({offset:70}),$(".features__descr").matchHeight(),$(".toggle-nav").click(function(){return $(this).toggleClass("on"),$(".nav__list").slideToggle(300,function(){"none"===$(this).css("display")&&$(this).removeAttr("style")}),!1}),revealItems($(".what__features .features__item"),"65%"),revealItems($(".section-title"),"90%"),$(".portfolio__list").magnificPopup({delegate:"a",type:"image"}),$(".btn--banner").magnificPopup({type:"inline"}),$(".banner__navigation-item").on("click",function(t){var e=$(this),n=e.index(),a=$(".banner__item");$(".banner__navigation-item").removeClass("active"),e.addClass("active"),a.removeClass("active"),$(a[n]).addClass("active")}),$("#loadPortfolio").on("click",function(e){e.preventDefault(),$(".loader").show(),t()}),showChart();var n=new ScrollMagic.Controller,a=new ScrollMagic.Scene({duration:230,offset:150}).setPin("#mainheaderIc").addTo(n);e(),$(window).on("resize",e);var o=$("#mainheaderScroll");new Waypoint({element:document.getElementById("what"),handler:function(t){"down"==t?o.attr("href","#portfolio"):o.attr("href","#what")}})});
