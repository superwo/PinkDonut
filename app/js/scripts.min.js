function showChart(){$percent.each(function(t){function e(){$({countNum:a.text()}).animate({countNum:o},{duration:3e3,easing:"swing",step:function(){a.text(Math.floor(this.countNum)+"%"),n.parent(".pie").attr("style","animation-delay: -"+this.countNum+"s")},complete:function(){a.text(this.countNum+"%"),n.parent(".pie").attr("style","animation-delay: -"+this.countNum+"s")}}),i.destroy()}var n=$(this),o=parseFloat($(this).attr("data-percent")),a=$($percentText[t]);o<0?o=0:o>100&&(o=100);var i=new Waypoint({element:n[0],handler:e.bind(this),offset:"65%"})})}function revealItems(t,e){!function(){t.addClass("reveal-item")}(),function(){t.each(function(){var t=this;new Waypoint({element:t,handler:function(){$(t).addClass("reveal-item--is-visible")},offset:e})})}()}var $percent=$(".pie__percent"),$percentText=$(".features__title span");$(document).ready(function(){function t(){$.getJSON("../portfolio.json",function(t){var e=$(".portfolio__list");$.each(t,function(t,n){var o=$("<li></li>");o.addClass("portfolio__item");var a='<a class="portfolio__view" style="background-image: url('+n.url+');" href="'+n.url+'"><span></span></a>';o.html(a),e.append(o)})}).done(function(){$("#loadPortfolio").parent(".btn-wrap").hide()}).fail(function(){console.error("error from getJSON!")}).always(function(){$(".loader").hide()})}$(".nav__link").smoothScroll(),$("#mainheaderScroll, .section-link").smoothScroll({offset:70}),$(".features__descr").matchHeight(),$(".toggle-nav").click(function(){return $(this).toggleClass("on"),$(".nav__list").slideToggle(300,function(){"none"===$(this).css("display")&&$(this).removeAttr("style")}),!1}),revealItems($(".what__features .features__item"),"65%"),revealItems($(".section-title"),"90%"),revealItems($(".section-descr"),"70%"),$(".portfolio__list").magnificPopup({delegate:"a",type:"image"}),$("#loadPortfolio").on("click",function(e){e.preventDefault(),$(".loader").show(),t()}),showChart();var e=new ScrollMagic.Controller;new ScrollMagic.Scene({duration:230,offset:150}).setPin("#mainheaderIc").addTo(e);var n=$("#mainheaderScroll");new Waypoint({element:document.getElementById("what"),handler:function(t){"down"==t?n.attr("href","#portfolio"):n.attr("href","#what")}})});